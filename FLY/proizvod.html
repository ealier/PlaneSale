<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="proizvod.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    
    <div class="header">
        <div class="logo">
            <a href="index.html"><img src="img/Logo.svg" alt="Логотип"></a>
            <a href="index.html" class="logo-text">Plane Sale</a>
        </div>
        <ul class="nav-links">
            <li><a href="proizvoditeli.html">Производители</a></li>
            <li><a href="aviablog.html">Авиаблог</a></li>
        </ul>
        <div class="header-actions">
            <button class="button" id="gameBtn">Игра</button>
            <button class="button" id="loginBtn">Войти</button>
            <button class="button" id="sellBtn">Продать</button>
            <div class="cart-icon" id="cartButton">
                <i class="fas fa-shopping-cart"></i>
                <span id="cart-count">0</span>
            </div>
        </div>
    </div>

    <div id="gameModal" class="modal">
        <div class="modal-content game-modal-content">
            <span class="close" id="closeGameModal">×</span>
            <h2>Flappy Plane</h2>
            <canvas id="gameCanvas" width="480" height="640"></canvas>
            <div id="gameMenu">
                <p id="scoreDisplay">Score: 0</p>
                <button id="startGameBtn" class="button primary">Начать игру</button>
            </div>
        </div>
    </div>

    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeLoginModal">×</span>
            <h2>Вход</h2>
            <p>Пожалуйста, введите свои данные для входа:</p>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Имя пользователя:</label><br>
                    <input type="text" id="username" name="username">
                </div>
                <div class="form-group">
                    <label for="password">Пароль:</label><br>
                    <input type="password" id="password" name="password">
                </div>
                <button type="submit" class="button primary">Войти</button>
            </form>
            <p>Еще нет аккаунта? <a href="#" id="openRegisterModalLink">Зарегистрироваться</a></p>
        </div>
    </div>

    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeRegisterModal">×</span>
            <h2>Регистрация</h2>
            <p>Создайте новый аккаунт:</p>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerUsername">Имя пользователя:</label><br>
                    <input type="text" id="registerUsername" name="registerUsername">
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email:</label><br>
                    <input type="email" id="registerEmail" name="registerEmail">
                </div>
                <div class="form-group">
                    <label for="registerPassword">Пароль:</label><br>
                    <input type="password" id="registerPassword" name="registerPassword">
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Подтвердите пароль:</label><br>
                    <input type="password" id="confirmPassword" name="confirmPassword">
                </div>
                <button type="submit" class="button primary">Зарегистрироваться</button>
            </form>
            <p>Уже зарегистрированы? <a href="#" id="openLoginModalLink">Войти</a></p>
        </div>
    </div>

    <div id="sellModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeSellModal">×</span>
            <h2>Продать самолет</h2>
            <p>Заполните форму ниже, чтобы разместить объявление о продаже:</p>
            <form id="sellForm">
                <div class="form-group">
                    <label for="planeModel">Модель самолета:</label>
                    <input type="text" id="planeModel" name="planeModel">
                </div>
                <div class="form-group">
                    <label for="planePhoto">Фотография самолета:</label>
                    <input type="file" id="planePhoto" name="planePhoto">
                </div>
                <div class="form-group">
                    <label for="price">Цена (USD):</label>
                    <input type="number" id="price" name="price">
                </div>
                <div class="form-group">
                    <label for="contactName">Ваше имя:</label>
                    <input type="text" id="contactName" name="contactName">
                </div>
                <div class="form-group">
                    <label for="contactEmail">Ваш email:</label>
                    <input type="email" id="contactEmail" name="contactEmail">
                </div>
                <div class="form-group">
                    <label for="contactPhone">Ваш телефон:</label>
                    <input type="tel" id="contactPhone" name="contactPhone">
                </div>
                <div class="form-group">
                    <label for="description">Описание самолета:</label>
                    <textarea id="description" name="description"></textarea>
                </div>
                <button type="submit" class="button primary">Продать</button>
            </form>
        </div>
    </div>

    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeCartModal">×</span>
            <h2>Корзина</h2>
            <div id="cart-items">
                <p>В корзине пока ничего нет.</p>
            </div>
            <div class="cart-total">
                <b>Итого:</b> <span id="cart-total-price">0 ₽</span>
            </div>
            <button class="button primary" id="checkoutBtn">Оформить заказ</button>
        </div>
    </div>

    <div id="flying-item">
        <img id="flying-item-image" src="" alt="Товар">
    </div>

    <div class="breadcrumb">
        <a href="/" class="logo-link">
            <img src="svg/globe.svg" alt="Логотип" class="logo1">
        </a>
        <div class="breadcrumb-links">
            <a href="/" class="home-link">
                </i> Главная
            </a>
            <span class="separator">→</span>
            <span class="current-page">Покупка самолета</span>
        </div>
    </div>

    <div class="filters-container">
        <div class="filter-group">
            <label for="price-filter">Цена:</label>
            <select id="price-filter" class="filter-select">
                <option value="all">Все</option>
                <option value="0-500000000">До 500 млн ₽</option>
                <option value="500000000-1000000000">500 млн - 1 млрд ₽</option>
                <option value="1000000000-2000000000">1-2 млрд ₽</option>
                <option value="2000000000">Более 2 млрд ₽</option>
            </select>
        </div>
        <div class="search-group">
            <input type="text" id="search-input" placeholder="Поиск по названию...">
            <button id="search-button" class="button primary"><i class="fas fa-search"></i></button>
        </div>
        <div class="filter-group">
            <label for="sort-by">Сортировка:</label>
            <select id="sort-by" class="filter-select">
                <option value="default">По умолчанию</option>
                <option value="price-asc">Цена (по возрастанию)</option>
                <option value="price-desc">Цена (по убыванию)</option>
                <option value="name-asc">Название (А-Я)</option>
                <option value="name-desc">Название (Я-А)</option>
            </select>
        </div>
        <div class="filter-group">
            <label for="type-filter">Тип:</label>
            <select id="type-filter" class="filter-select">
                <option value="all">Все</option>
                <option value="business">Бизнес-джеты</option>
                <option value="commercial">Коммерческие</option>
                <option value="light">Легкие</option>
            </select>
        </div>
        <button id="reset-filters" class="button secondary">Сбросить фильтры</button>
    </div>

    <div class="plane-cards-wrapper">
        <div class="plane-cards-container">
            <a href="#" class="plane-card" data-name="BOMBARDIER CHALANGER 650" data-price="1499690253" data-image="planesale/Bombardier-g6500-small.jpg">
                <div class="plane-image-container">
                    <img src="planesale/Bombardier-g6500-small.jpg" alt="Самолет 1">
                </div>
                <div class="plane-card-info">
                    <button class="wishlist-btn" data-name="BOMBARDIER CHALANGER 650">
                        <i class="far fa-heart"></i>
                    </button>
                    <div class="plane-price">1 499 690 253 ₽</div>
                    <div class="plane-details">BOMBARDIER CHALANGER 650</div>
                    <button class="add-to-cart-btn" data-name="BOMBARDIER CHALANGER 650" data-price="1499690253" data-image="planesale/Bombardier-g6500-small.jpg">В корзину</button>
                </div>
            </a>
            <a href="#" class="plane-card" data-name="BOEING 787" data-price="616943600" data-image="planesale/Bombardier-Global 5500-small.jpg">
                <div class="plane-image-container">
                    <img src="planesale/Bombardier-Global 5500-small.jpg" alt="Самолет 2">
                </div>
                <div class="plane-card-info">
                    <div class="plane-price">616 943 600 ₽</div>
                    <div class="plane-details">BOEING 787</div>
                    <button class="add-to-cart-btn" data-name="BOEING 787" data-price="616943600" data-image="planesale/Bombardier-Global 5500-small.jpg">В корзину</button>
                </div>
            </a>
            <a href="#" class="plane-card" data-name="AIRBUS A350" data-price="1580309250" data-image="planesale/BOMBARDIER-GLOBAL-5000_small.jpg">
                <div class="plane-image-container">
                    <img src="planesale/BOMBARDIER-GLOBAL-5000_small.jpg" alt="Самолет 3">
                </div>
                <div class="plane-card-info">
                    <div class="plane-price">1 580 309 250₽</div>
                    <div class="plane-details">AIRBUS A350</div>
                    <button class="add-to-cart-btn" data-name="AIRBUS A350" data-price="1580309250" data-image="planesale/BOMBARDIER-GLOBAL-5000_small.jpg">В корзину</button>
                </div>
            </a>
            <a href="#" class="plane-card" data-name="GULFSTREAM G650" data-price="2779598475" data-image="planesale/Challenger 650_2021.jpg">
                <div class="plane-image-container">
                    <img src="planesale/Challenger 650_2021.jpg" alt="Самолет 4">
                </div>
                <div class="plane-card-info">
                    <div class="plane-price">2 779 598 475 ₽</div>
                    <div class="plane-details">GULFSTREAM G650</div>
                    <button class="add-to-cart-btn" data-name="GULFSTREAM G650" data-price="2779598475" data-image="planesale/Challenger 650_2021.jpg">В корзину</button>
                </div>
            </a>
            <a href="#" class="plane-card" data-name="CESSNA 172" data-price="206422894" data-image="planesale/Global 6000_bombardier-small.jpg">
                <div class="plane-image-container">
                    <img src="planesale/Global 6000_bombardier-small.jpg" alt="Самолет 5">
                </div>
                <div class="plane-card-info">
                    <div class="plane-price">206 422 894 ₽</div>
                    <div class="plane-details">CESSNA 172</div>
                    <button class="add-to-cart-btn" data-name="CESSNA 172" data-price="206422894" data-image="planesale/Global 6000_bombardier-small.jpg">В корзину</button>
                </div>
            </a>
            <a href="#" class="plane-card" data-name="BOMBARDIER GLOBAL 7500" data-price="1116121904" data-image="planesale/Global 7500 Product-small.jpg">
                <div class="plane-image-container">
                    <img src="planesale/Global 7500 Product-small.jpg" alt="Самолет 6">
                </div>
                <div class="plane-card-info">
                    <div class="plane-price">1 116 121 904 ₽</div>
                    <div class="plane-details">BOMBARDIER GLOBAL 7500</div>
                    <button class="add-to-cart-btn" data-name="BOMBARDIER GLOBAL 7500" data-price="1116121904" data-image="planesale/Global 7500 Product-small.jpg">В корзину</button>
                </div>
            </a>
            <a href="#" class="plane-card" data-name="BOMBARDIER GLOBAL 7500" data-price="1116121904" data-image="planesale/Global 7500 Product-small.jpg">
                <div class="plane-image-container">
                    <img src="planesale/Global 7500 Product-small.jpg" alt="Самолет 6">
                </div>
                <div class="plane-card-info">
                    <div class="plane-price">1 116 121 904 ₽</div>
                    <div class="plane-details">BOMBARDIER GLOBAL 7500</div>
                    <button class="add-to-cart-btn" data-name="BOMBARDIER GLOBAL 7500" data-price="1116121904" data-image="planesale/Global 7500 Product-small.jpg">В корзину</button>
                </div>
            </a>
            <a href="#" class="plane-card" data-name="ZLIN 142" data-price="7000000" data-image="planesale/i.webp">
                <div class="plane-image-container">
                    <img src="planesale/i.webp" alt="Самолет 6">
                </div>
                <div class="plane-card-info">
                    <div class="plane-price">7 000 000 ₽</div>
                    <div class="plane-details">ZLIN 142</div>
                    <button class="add-to-cart-btn" data-name="ZLIN 142" data-price="7000000" data-image="planesale/i.webp">В корзину</button>
                </div>
            </a>
            <a href="#" class="plane-card" data-name="BOMBARDIER GLOBAL 7500" data-price="1116121904" data-image="planesale/Global 7500 Product-small.jpg">
                <div class="plane-image-container">
                    <img src="planesale/Global 7500 Product-small.jpg" alt="Самолет 6">
                </div>
                <div class="plane-card-info">
                    <div class="plane-price">1 116 121 904 ₽</div>
                    <div class="plane-details">BOMBARDIER GLOBAL 7500</div>
                    <button class="add-to-cart-btn" data-name="BOMBARDIER GLOBAL 7500" data-price="1116121904" data-image="planesale/Global 7500 Product-small.jpg">В корзину</button>
                </div>
            </a>
        </div>
    </div>

    <div class="pagination">
        <button class="pagination-button prev" disabled><i class="fas fa-chevron-left"></i></button>
        <div class="page-numbers">
            <button class="page-number active">1</button>
            <button class="page-number">2</button>
            <button class="page-number">3</button>
        </div>
        <button class="pagination-button next"><i class="fas fa-chevron-right"></i></button>
    </div>

    <footer class="footer">
        <div class="footer-section">
            <div class="footer-logo">
                <img src="logo futer index/Group 9.svg" alt="Логотип">
                <span>PlaneSale</span>
            </div>
        </div>
        <div class="footer-section">
            <h3>Категории</h3>
            <ul>
                <li><a href="#">Купить одномоторный самолет</a></li>
                <li><a href="#">Купить многомоторный самолет</a></li>
                <li><a href="#">Купить турбовинтовой самолет</a></li>
                <li><a href="#">Купить частный JET</a></li>
                <li><a href="#">Купить частный вертолет</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Популярные производители</h3>
            <ul>
                <li><a href="#">Cessna</a></li>
                <li><a href="#">Piper</a></li>
                <li><a href="#">Beechcraft</a></li>
                <li><a href="#">Robinson</a></li>
                <li><a href="#">Cirrus</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Социальные сети</h3>
            <ul>
                <li><a href="#"><img src="logo futer index/icons8-vk-50 2.svg" alt="Вконтакте" class="social-icon"> Вконтакте</a></li>
                <li><a href="#"><img src="logo futer index/pngwing.com 2.svg" alt="Email" class="social-icon"> Email</a></li>
            </ul>
        </div>
    </footer>

    <div class="footer-bottom">
        © PlaneSale, 2018-2025
    </div>

    <div id="flying-item">
        <img src="" alt="Самолет" id="flying-item-image">
    </div>

    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('profile-modal')">×</span>
            <h2>Профиль</h2>
            <div id="profile-info">
                <p>Email: <span id="profile-email"></span></p>
                <p>Имя: <span id="profile-username"></span></p>
            </div>
            <button onclick="logout()">Выйти</button>
        </div>
    </div>
    
    <script>
    function openProfileModal() {
        const user = JSON.parse(localStorage.getItem('currentUser'));
        if (user) {
            document.getElementById('profile-email').textContent = user.email;
            document.getElementById('profile-username').textContent = user.username;
            document.getElementById('profile-modal').style.display = 'block';
        }
    }
    
    function logout() {
        localStorage.removeItem('currentUser');
        closeModal('profile-modal');
        updateAuthUI();
    }

    function openModal(modalId) {
        document.getElementById(modalId).classList.add('show');
        document.getElementById(modalId).style.display = 'block';
    }

    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        modal.classList.remove('show');
        setTimeout(() => {
            modal.style.display = 'none';
        }, 300);
    }

    // Игра Flappy Airplane
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    let gameState = 'menu';
    let score = 0;
    let highScore = localStorage.getItem('highScore') || 0;
    let airplane = { x: 100, y: 320, velocity: 0, gravity: 0.2 / 3, lift: -10 / 2.5 }; // Adjusted for smoothness
    let buildings = [];
    let frameCount = 0;
    const buildingGap = 200;
    const buildingWidth = 50;
    const gameSpeed = 2 / 2.5; // Reduced by 2.5x for smoother motion

    const airplaneImg = new Image();
    airplaneImg.src = 'https://i.pinimg.com/736x/d2/4d/94/d24d940d584fc03c9d5429e5c4f2406b.jpg';
    const buildingImg = new Image();
    buildingImg.src = 'https://avatars.mds.yandex.net/i?id=37bc60752fd00c0bb9258260ded299c7_l-7548061-images-thumbs&n=13';
    const sadSound = new Audio();
    sadSound.src = 'https://www.soundjay.com/buttons/sad-trombone-1.mp3';

    function startGame() {
        gameState = 'waiting'; // Transition to waiting state
        score = 0;
        airplane.y = 320;
        airplane.velocity = 0;
        buildings = [];
        frameCount = 0;
        document.getElementById('startGameBtn').style.display = 'none';
        document.getElementById('scoreDisplay').textContent = `Score: ${score}`;
        gameLoop();
    }

    function beginPlaying() {
        gameState = 'playing';
        airplane.velocity = airplane.lift; // Initial lift on first input
        gameLoop();
    }

    function gameOver() {
        gameState = 'gameOver';
        sadSound.play();
        if (score > highScore) {
            highScore = score;
            localStorage.setItem('highScore', highScore);
        }
        document.getElementById('startGameBtn').textContent = `Игра окончена! Счет: ${score} | Рекорд: ${highScore} | Начать заново`;
        document.getElementById('startGameBtn').style.display = 'block';
    }

    function spawnBuilding() {
        const minHeight = 100;
        const maxHeight = canvas.height - buildingGap - minHeight;
        const height = Math.random() * (maxHeight - minHeight) + minHeight;
        buildings.push({
            x: canvas.width,
            topHeight: height,
            passed: false
        });
    }

    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        if (gameState === 'waiting') {
            // Draw airplane in waiting state
            ctx.drawImage(airplaneImg, airplane.x, airplane.y, 30, 30);
            // Display prompt
            ctx.fillStyle = 'white';
            ctx.font = '20px Inter, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('Нажмите Пробел или ПКМ для старта', canvas.width / 2, canvas.height / 2);
            requestAnimationFrame(gameLoop);
            return;
        }

        if (gameState !== 'playing') return;

        // Обновление самолета
        airplane.velocity += airplane.gravity;
        airplane.y += airplane.velocity;
        if (airplane.y < 0) {
            airplane.y = 0;
            airplane.velocity = 0;
        }
        if (airplane.y > canvas.height - 30) {
            gameOver();
        }

        // Отрисовка самолета
        ctx.drawImage(airplaneImg, airplane.x, airplane.y, 50, 30);

        // Обновление и отрисовка зданий
        if (frameCount % (100 * 2.5) === 0) { // Increased spawn interval by 2.5x
            spawnBuilding();
        }
        buildings.forEach(building => {
            building.x -= gameSpeed;
            ctx.drawImage(buildingImg, building.x, 0, buildingWidth, building.topHeight);
            ctx.drawImage(buildingImg, building.x, building.topHeight + buildingGap, buildingWidth, canvas.height - building.topHeight - buildingGap);

            if (
                airplane.x + 50 > building.x &&
                airplane.x < building.x + buildingWidth &&
                (airplane.y < building.topHeight || airplane.y + 30 > building.topHeight + buildingGap)
            ) {
                gameOver();
            }

            if (!building.passed && airplane.x > building.x + buildingWidth) {
                score++;
                building.passed = true;
                document.getElementById('scoreDisplay').textContent = `Score: ${score}`;
            }
        });

        buildings = buildings.filter(building => building.x + buildingWidth > 0);
        frameCount++;
        requestAnimationFrame(gameLoop);
    }

    // Управление
    function handleInput(e) {
        if (gameState === 'waiting') {
            beginPlaying();
        } else if (gameState === 'playing') {
            airplane.velocity = airplane.lift;
        }
    }

    document.addEventListener('keydown', function(e) {
        if (e.code === 'Space') {
            handleInput(e);
        }
    });

    canvas.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        handleInput(e);
    });

    document.getElementById('gameBtn').addEventListener('click', function() {
        openModal('gameModal');
    });

    document.getElementById('closeGameModal').addEventListener('click', function() {
        closeModal('gameModal');
        gameState = 'menu';
        document.getElementById('startGameBtn').textContent = 'Начать игру';
        document.getElementById('startGameBtn').style.display = 'block';
    });

    document.getElementById('startGameBtn').addEventListener('click', startGame);

    airplaneImg.onload = buildingImg.onload = function() {
        ctx.drawImage(airplaneImg, 100, 320, 50, 30);
    };
    </script>

    <script src="proizvod.js"></script>
    <script src="auth.js"></script>
</body>
</html>